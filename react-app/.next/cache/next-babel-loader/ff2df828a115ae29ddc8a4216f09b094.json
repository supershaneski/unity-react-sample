{"ast":null,"code":"export default (function (containerElement) {\n  console.log(containerElement.offsetWidth, containerElement.offsetHeight);\n\n  (function (window) {\n    'use strict';\n\n    function unityPlugin() {\n      var tdx = {};\n      var MAX_INDEX = 100000;\n      var retval = Array(MAX_INDEX + 1).fill();\n      var retindex = 0;\n\n      function getRetIndex() {\n        return retindex >= MAX_INDEX ? 0 : retindex++;\n      }\n\n      function getRetValue(index) {\n        var value = retval[index];\n        delete retval[index];\n        return value;\n      }\n\n      function sendMessage(func_name, param) {\n        if (typeof gameInstance === \"undefined\") {\n          //throw \"Calling:\" + func_name;\n          console.log(\"TDX : \" + func_name); //throw new Error(\"hey jude\");\n\n          return;\n        }\n\n        console.log(\"SEND MESSAGE : \" + func_name);\n        gameInstance.SendMessage(\"MainControl\", func_name, param);\n        return true;\n      }\n\n      function makeParam() {\n        var param = {\n          index: arguments[0],\n          args: null\n        };\n\n        if (arguments.length > 1 && arguments[1] !== null) {\n          param.args = JSON.stringify(Object.values(arguments[1]));\n        }\n\n        return JSON.stringify(param);\n      } // Utility\n\n\n      tdx.SetRetValue = function (index, value) {\n        retval[index] = value;\n      }; // Events\n\n\n      tdx.OnLoad = function (callback) {\n        return callback;\n      };\n\n      tdx._OnLoad = function () {\n        this.OnLoad();\n      };\n\n      tdx.OnDeselect = function (callback) {\n        return callback;\n      };\n\n      tdx._OnDeselect = function () {\n        this.OnDeselect();\n      };\n\n      tdx.OnClick = function (callback) {\n        return callback;\n      };\n\n      tdx._OnClick = function (attr) {\n        this.OnClick(attr);\n      };\n\n      Object.defineProperty(tdx.SetRetValue, \"name\", {\n        value: \"SetRetValue\"\n      });\n      return tdx;\n    }\n\n    if (typeof window.TdxPlayer === 'undefined') {\n      window.TdxPlayer = unityPlugin();\n    }\n\n    var gameInstance = UnityLoader.instantiate(\"unity-container\", \"/data/Build.json\");\n  })(window);\n\n  function foo() {\n    console.log(\"foo\");\n  }\n\n  function plugin() {\n    return window.TdxPlayer;\n  }\n\n  return {\n    foo: foo,\n    plugin: plugin\n  };\n});","map":{"version":3,"sources":["/Users/shane/Documents/projects/github/unity-react-sample/react-app/components/ShaneLoader.js"],"names":["containerElement","console","log","offsetWidth","offsetHeight","window","unityPlugin","tdx","MAX_INDEX","retval","Array","fill","retindex","getRetIndex","getRetValue","index","value","sendMessage","func_name","param","gameInstance","SendMessage","makeParam","arguments","args","length","JSON","stringify","Object","values","SetRetValue","OnLoad","callback","_OnLoad","OnDeselect","_OnDeselect","OnClick","_OnClick","attr","defineProperty","TdxPlayer","UnityLoader","instantiate","foo","plugin"],"mappings":"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","sourcesContent":["export default containerElement => {\n    \n    console.log(containerElement.offsetWidth, containerElement.offsetHeight);\n\n    (function(window){\n    \n        'use strict';\n\n        function unityPlugin() {\n            var tdx = {};\n            var MAX_INDEX = 100000;\n\t\t    var retval = Array(MAX_INDEX + 1).fill();\n            var retindex = 0;\n        \n            function getRetIndex()\n            {\n                return (retindex >= MAX_INDEX)?0:retindex++;\n            }\n            function getRetValue(index)\n            {\n                var value = retval[index];\n                delete retval[index];\n                return value;\n            }\n            function sendMessage(func_name, param)\n            {\n                if (typeof gameInstance === \"undefined\") {\n                    //throw \"Calling:\" + func_name;\n                    console.log(\"TDX : \" + func_name);\n                    //throw new Error(\"hey jude\");\n                    return;\n                }\n\n                console.log(\"SEND MESSAGE : \" + func_name);\n                gameInstance.SendMessage(\"MainControl\", func_name, param);\n                return true;\n            }\n            function makeParam()\n            {\n                var param = {\n                    index: arguments[0],\n                    args: null\n                };\n\n                if (arguments.length > 1 && arguments[1] !== null)\n                {\n                    param.args = JSON.stringify(Object.values(arguments[1]));\n                }\n\n                return JSON.stringify(param);\n            }\n\n            // Utility\n            tdx.SetRetValue = function(index, value)\n            {\n                retval[index] = value;\n            };\n\n            // Events\n            tdx.OnLoad = function(callback)\n            {\n                return callback;\n            };\n            tdx._OnLoad = function()\n            {\n                this.OnLoad();\n            };\n            tdx.OnDeselect = function(callback)\n            {\n                return callback;\n            };\n            tdx._OnDeselect = function()\n            {\n                this.OnDeselect();\n            };\n\n            tdx.OnClick = function(callback)\n            {\n                return callback;\n            };\n            tdx._OnClick = function(attr)\n            {\n                this.OnClick(attr);\n            };\n        \n            Object.defineProperty(tdx.SetRetValue, \"name\", { value: \"SetRetValue\" });\n\n            return tdx;\n            \n        }\n\n        if(typeof(window.TdxPlayer) === 'undefined'){\n            window.TdxPlayer = unityPlugin();\n        }\n\n        var gameInstance = UnityLoader.instantiate(\"unity-container\", \"/data/Build.json\");\n    \n    \n    })(window);\n\n    function foo() {\n        console.log(\"foo\");\n    }\n\n    function plugin() {\n        return window.TdxPlayer;\n    }\n\n    return {\n        foo,\n        plugin,\n    }\n}"]},"metadata":{},"sourceType":"module"}